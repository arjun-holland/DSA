# Problem
<img width="683" height="348" alt="image" src="https://github.com/user-attachments/assets/595ec31c-61ad-412a-87f0-334838544300" />
<img width="864" height="653" alt="image" src="https://github.com/user-attachments/assets/fc90168b-7f95-450b-9e42-58df6b70e4d9" />
<img width="704" height="545" alt="image" src="https://github.com/user-attachments/assets/8c4cfefe-d0ae-4fa3-bd80-fa93c1754cee" />

# CODE
```
class Solution {
public:
    long long bowlSubarrays(vector<int>& nums) {
        int n = nums.size();
        vector<int> PGE(n,-1), NGE(n,n);
        stack<int> s;

        for(int i=0;i<n;i++){
            while(!s.empty() && nums[s.top()] < nums[i])s.pop();
            if(!s.empty())PGE[i] = s.top();
            else PGE[i] = -1;
            s.push(i);
        }

        for(int i=n-1;i>=0;i--){
            while(!s.empty() && nums[s.top()] < nums[i])s.pop();
            if(!s.empty())NGE[i] = s.top();
            else NGE[i] = n;
            s.push(i);
        }
        
        long long ans = 0;
        for(int i=1; i<=n-2; i++){
            int L = PGE[i];
            int R = NGE[i];
            if(L == -1 || R == n)continue;
            if(min(nums[L],nums[R]) > nums[i]){
                ans++;
            }
        }
        return ans;
    }
};
```
